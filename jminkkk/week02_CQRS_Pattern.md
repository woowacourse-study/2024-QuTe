# CQRS
### CQRS란 무엇이며, 그 주요 원칙은 무엇인가요?

CQRS는 Command Query Responsibility Segregation의 약자로, 애플리케이션의 읽기(Query) 작업과 쓰기(Command) 작업을 분리하는 아키텍처 패턴입니다.

주요 원칙:

- 데이터를 변경하는 명령(Command)과 데이터를 조회하는 쿼리(Query)를 별도의 모델로 분리
- 각 모델은 독립적으로 설계, 구현, 최적화됨
- 명령과 쿼리에 대해 서로 다른 데이터 저장소를 사용할 수 있음

### CQRS의 장점과 단점을 각각 설명해주세요.

장점:

- 성능 최적화
    - 읽기와 쓰기 작업을 독립적으로 확장 가능
- 복잡성 관리
    - 복잡한 도메인 모델을 단순화할 수 있음
- 유연성
    - 읽기와 쓰기 모델을 독립적으로 발전시킬 수 있음

단점:

- 복잡성 증가
    - 두 개의 모델을 관리해야 하므로 전반적인 시스템 복잡도 증가
- 일관성 관리
    - 읽기와 쓰기 모델 간 데이터 동기화 필요
- 오버엔지니어링 위험
    - 단순한 시스템에 적용 시 불필요한 복잡성 초래 가능

### CQRS와 이벤트 소싱(Event Sourcing)의 관계에 대해 설명해주세요.

- 이벤트 소싱은 상태 변경을 이벤트로 저장하는 방식
- CQRS의 명령 모델에서 이벤트 소싱을 사용하여 상태 변경을 기록할 수 있음
- 이벤트 스트림을 기반으로 다양한 읽기 모델을 구축할 수 있음
- 두 패턴을 함께 사용하면 시스템의 유연성과 확장성이 향상됨

### CQRS 패턴을 적용하기에 적합한 시나리오나 애플리케이션 유형은 무엇인가요?

- 읽기와 쓰기 작업의 비율 차이가 큰 시스템
- 복잡한 도메인 모델을 가진 엔터프라이즈 애플리케이션
- 높은 확장성이 요구되는 시스템
- 이벤트 기반 시스템

### CQRS에서 '명령(Command)'과 '쿼리(Query)'의 차이점을 설명해주세요.

명령(Command)

- 시스템의 상태를 변경하는 작업
- 부작용(side effect)을 발생시킴
- 일반적으로 반환 값이 없거나 작업의 성공/실패만을 반환

쿼리(Query)

- 시스템의 상태를 조회하는 작업
- 부작용을 발생시키지 않음
- 데이터를 반환함

### CQRS 구현 시 데이터 일관성을 어떻게 유지할 수 있나요?

- 이벤트 기반 동기화
    - 명령 모델의 변경사항을 이벤트로 발행하고, 쿼리 모델에서 이를 구독하여 업데이트
- 주기적 동기화
    - 정기적으로 명령 모델과 쿼리 모델을 비교하여 불일치를 해결
- 최종 일관성 허용
    - 일시적인 불일치를 허용하고, 시간이 지나면 일관성이 확보되도록 설계
- 버전 관리
    - 각 엔티티에 버전 번호를 부여하여 변경 사항 추적
- ~~캐시 무효화~~
    - ~~명령 실행 시 관련 쿼리 모델의 캐시를 무효화~~

### CQRS에서 읽기 모델과 쓰기 모델을 동기화하는 방법에는 어떤 것들이 있나요?

- 즉시 업데이트
    - 명령 처리 직후 쿼리 모델 즉시 업데이트 (작은 규모 시스템에 적합)
- 이벤트 기반 동기화
    - 명령 모델의 변경 사항을 이벤트로 발행하고 쿼리 모델에서 구독
- 데이터베이스 복제
    - 명령 모델 데이터베이스를 쿼리 모델 데이터베이스로 실시간 복제
- 배치 프로세스
    - 주기적으로 대량 동기화 작업 실행
